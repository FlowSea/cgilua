# Installation directories
LUA_DIR= /usr/local/share/lua/5.0
LUA_LIBDIR= /usr/local/lib/lua/5.0
# CGILua root directory
CGILUA_DIR= /usr/local/cgilua
# Apache root directory
APACHE2_DIR= /usr/local/apache2
CGI_DIR= $(APACHE2_DIR)/cgi-bin
# Lua FastCGI directory
FCGI_DIR= $(APACHE2_DIR)/fcgilua
# Lua Apache module directory
MOD_DIR= $(CGILUA_DIR)
MOD_DEFS= -DLUA_STATE_PER_PROCESS
#MOD_DEFS= -DLUA_STATE_PER_REQUEST
# Lua Compiler
LUAC= /usr/local/bin/luac
# Lua Binary converter (bin2c)
# Lua distribution includes it at etc directory
BIN2C= /usr/local/bin/bin2c

# OS dependent
LIB_EXT= .dylib
#LIB_EXT= .so
LIB_OPTION= -dynamiclib #for MacOS X
#LIB_OPTION= -shared #for Linux

# Compilation directives
# pre-compile and include mod2.lua into mod_lua.c
MOD2_LUA= -DINCLUDE_MOD2
# On FreeBSD systems, the following line should be commented
DLLIB= -ldl
WARN= -O2 -Wall -fPIC -W -Waggregate-return -Wcast-align -Wmissing-prototypes -Wnested-externs -Wshadow -Wwrite-strings
INCS= -I/usr/local/include/lua5
CFLAGS= $(WARN) $(INCS) $(MOD2_LUA)
CC= gcc

#########################################################
VERSION= 5.0a4
PKG= cgilua-$(VERSION)
TAR_FILE= $(PKG).tar.gz
ZIP_FILE= $(PKG).zip
DIST_DIR= ../$(PKG)/$T
CGILUA_DIR=        $(LUA_DIR)/cgilua
CGILUA_TMPDIR=     $(CGILUA_DIR)/tmp
CGILUA_DOC=        $(CGILUA_DIR)/doc

CL_LIBS= -llua -llualib -lm $(DLLIB)
LIBS= $(CL_LIBS)

# $Id: config,v 1.20 2004/08/27 15:42:46 tomas Exp $
