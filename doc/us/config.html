<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html><head>
  <title>CGILua 5.0: Installing and configuring</title>
  <style type="text/css">
     ul { list-style-type: disc };
  </style></head>
<body style="background-color: rgb(255, 255, 255);">
<center>
<table border="0" cellpadding="2" cellspacing="2">
  <tbody>
    <tr>
      <td align="center">
        <a href="http://www.keplerproject.org">
          <img alt="CGILua" src="cgi-128.gif" border="0">
        </a>
      </td>
    </tr>
    <tr>
      <td align="center"><big><b>CGILua 5.0</b></big>
      </td>
    </tr>
    <tr>
      <td align="center" valign="top">Installing and configuring</td>
    </tr>
  </tbody>
</table>
</center>
<center><small><a href="index.html">home</a>
&middot; <a href="#installation">installation</a>
&middot; <a href="#config">configuration</a>
</small></center>

<hr>

<h2>Contents</h2>
<ul>
  <li><a href="#installation">Installation</a></li>
  <li><a href="#config">Configuration</a>
    <ul>
      <li><a href="#sys_config"><code>CGILua Configuration</code></a></li>
      <li><a href="#error_handling"><code>Error Handling</code></a></li>
    </ul>
  </li>
</ul>

<a name="installation"></a>
<h2>Installation</h2>

<p>
CGILua is a Lua package which follows the
<a href="http://www.keplerproject.org/compat">package proposal</a>
for Lua 5.1.
</p>

<p>
The whole package should be installed in a directory called
<tt>cgilua</tt>.
</p>


<a name="config"></a>
<h2>Configuration</h2>

<p>CGILua 5.0 offers a single configuration file,
called <code>config.lua</code>
and a set of functions to alter the default
configuration.
</p>

<a name="sys_config"></a>
<h3>CGILua configuration</h3>

<p>CGILua system configuration is placed at <code>config.lua</code>.
Some of the configuration parameters are listed below:
</p>

<ul>
  <li>
script handlers, by calling
<a href="reference.html#addscripthandler">
<code>cgilua.addscripthandler</code></a> (see also
<a href="reference.html#buildplainhandler">cgilua.buildplainhandler</a> and
<a href="reference.html#buildprocesshandler">cgilua.buildprocesshandler</a>
for functions that build simple handlers);
  </li>
  <li>
POST data sizes, by calling <a href="reference.html#setmaxinput">
<code>cgilua.setmaxinput</code></a> and <a href="reference.html#setmaxfilesize">
<code>cgilua.setmaxfilesize</code></a>;
  </li>
  <li>
opening and closing functions, by calling
<a href="reference.html#addopenfunction"><code>cgilua.addopenfunction</code></a> and
<a href="reference.html#addclosefunction"><code>cgilua.addclosefunction</code></a>.
This functions are executed just before and after the script execution,
even if an error occurs.
  </li>
</ul>

<a name="error_handling"></a>
<h3>Error Handling</h3>

<p>There are three functions to handle errors in CGILua:
</p>

<p>The function <a href="reference.html#seterrorhandler">
<code>cgilua.seterrorhandler</code></a> defines the <i>error handler</i>,
a function called by Lua when an error has just occurred. The error handler
has access to the execution stack before the error is thrown and so it can
build an error message using stack information. Lua also provides a function
to do that: <code>debug.traceback</code>.</p>

<p>The function <a href="reference.html#seterroroutput">
<code>cgilua.seterroroutput</code></a> defines the function that decides
what to do with the message.
It could be sent to the client's browser or written to the log file
or sent to an e-mail address (with the help of LuaSocket, for example).
</p>

<p>The function
<a href="reference.html#errorlog"><code>cgilua.errorlog</code></a>
is provided to write directly to the http server error log file.
</p>
<hr>
<small>$Id: config.html,v 1.28 2005/03/08 21:04:51 carregal Exp $</small>
</body></html>
