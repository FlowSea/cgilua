<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
    <title>CGILua - Building web scripts with Lua</title>
    <link rel="stylesheet" href="http://www.keplerproject.org/doc.css" type="text/css"/>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
</head>
<body>

<div id="container">
	
<div id="product">
	<div id="product_logo"><a href="http://www.keplerproject.org">
		<img alt="CGILua logo" src="cgi-128.gif"/>
	</a></div>
	<div id="product_name"><big><b>CGILua</b></big></div>
	<div id="product_description">Building web scripts with Lua</div>
</div> <!-- id="product" -->

<div id="main">
	
<div id="navigation">
<h1>CGILua</h1>
	<ul>
		<li><a href="index.html">Home</a>
			<ul>
				<li><a href="index.html#overview">Overview</a></li>
				<li><a href="index.html#status">Status</a></li>
				<li><a href="index.html#download">Download</a></li>
				<li><a href="index.html#history">History</a></li>
				<li><a href="index.html#incompatibility">Incompatibilities</a></li>
				<li><a href="index.html#credits">Credits</a></li>
				<li><a href="index.html#contact">Contact us</a></li>
			</ul>
		</li>
		<li><a href="manual.html">Manual</a>
			<ul>
				<li><a href="manual.html#intro">Introduction</a></li>
				<li><a href="manual.html#installation">Installation</a></li>
				<li><a href="manual.html#config">Configuration</a></li>
				<li><a href="manual.html#scripts">Lua Scripts</a></li>
				<li><a href="manual.html#templates">Lua Pages</a></li>
				<li><a href="manual.html#parameters">Parameters</a></li>
			</ul>
		</li>
		<li><a href="reference.html">CGILua reference</a>
			<ul>
				<li><a href="reference.html#headers">Headers</a></li>
				<li><a href="reference.html#contents">Content generation</a></li>
				<li><a href="reference.html#prep">Pre-processing templates</a></li>
				<li><a href="reference.html#variables">CGILua's variables</a></li>
				<li><a href="reference.html#error_handling">Error Handling</a></li>
				<li><a href="reference.html#behavior">CGILua behavior</a></li>
				<li><a href="reference.html#auxiliar">Auxiliary functions</a></li>
				<li><a href="reference.html#urlcode">URL encoding functions</a></li>
				<li><a href="reference.html#index">Alphabetic index</a></li>
			</ul>
		</li>
		<li><strong>Distributed libraries</strong>
			<ul>
				<li><a href="libraries.html#cookies">Cookies</a></li>
				<li><a href="libraries.html#serialize">Serialize</a></li>
				<li><a href="libraries.html#session">Session</a></li>
				<li><a href="libraries.html#stable">Stable</a></li>
			</ul>
		</li>
		<li><a href="sapi.html">Server API</a></li>
		<li><a href="examples.html">Examples</a></li>
		<li><a href="license.html">License</a></li>
	</ul>
</div> <!-- id="navigation" -->

<div id="content">


<h2><a name="cookies"></a>Cookies</h2>

<a name="get"></a> 
<h3><code>cgilua.cookies.get (name)</code></h3>
Gets the value of the named cookie.<br>
Returns a string with the value of the cookie.

<a name="set"></a> 
<h3><code>cgilua.cookies.set (name, value[, options])</code></h3>
Sets the value of the named cookie.
This function should be called before the HTTP header is sent and before
any output is generated.<br>
Returns nothing.

<a name="sethtml"></a> 
<h3><code>cgilua.cookies.sethtml (name, value[, options])</code></h3>
Sets the value of the named cookie.
This function generates a <code>&lt;meta&gt;</code> HTML element so
it should be called after the <code>&lt;head&gt;</code> HTML tag was
produced and before the <code>&lt;body&gt;</code>.<br>
Returns nothing.


<h3><a name="delete"></a><code>cgilua.cookies.delete (name[, options])</code></h3>
Deletes the value of the named cookie
(by setting its value to <code>xxx</code>).
Returns nothing.


<hr/>
<h2><a name="serialize"></a>Serialize</h2>

<h3><code>cgilua.serialize (table, outfunc, indent, prefix)</code></h3>
Serializes a table.
Argument <code>table</code> is the table to be serialized;
<code>outfunc</code> is a function used to generate the output;
<code>indent</code> is an optional string with the indentation pattern;
<code>prefix</code> is an optional string with the indentation prefix
(it is used to store the actual indentation between the recursion calls).<br>
Some restrictions must be noted:
values of types <i>function</i> and <i>userdata</i> could not be serialized;
also, tables with cycles are not serialized.<br>
Returns nothing.

<hr/>
<h2><a name="session"></a>Session</h2>

<h3><a name="close"></a><code>cgilua.session.close ()</code></h3>
Closes user session.
Saves all data in <code>cgilua.session.data</code> to the storing system.
This function should be called after the end of the script's execution.
A recommended way to do that is by calling
<a href="reference.html#addclosefunction">addclosefunction</a>
in the configuration file.<br>
Returns nothing.


<h3><a name="data"></a><code>cgilua.session.data</code></h3>
Table which holds session data.


<h3><a name="delete"></a><code>cgilua.session.delete (id)</code></h3>
Deletes a session.
The argument is the session identifier.<br>
Returns nothing.


<h3><a name="load"></a><code>cgilua.session.load (id)</code></h3>
Loads data from a session.
The argument is the session identifier.<br>
Returns a table with session data or
<code>nil</code> followed by an error message.


<h3><a name="new"></a><code>cgilua.session.new ()</code></h3>
Creates a new session identifier.<br>
Returns the new session identifier.


<h3><a name="open"></a><code>cgilua.session.open ()</code></h3>
Opens user session.
Creates table <code>cgilua.session.data</code>.
This function should be called just before the execution of the script,
but after the processing of the request's headers.
Therefore it must be added to the opening functions list
(see <a href="reference.html#addopenfunction">addopenfunction</a>)
in the configuration file.<br>
Returns nothing.


<h3><a name="save"></a><code>cgilua.session.save (id, data)</code></h3>
Saves data to a session.
Argument <code>id</code> is a session identifier;
argument <code>data</code> is a table with session data to be saved.<br>
Returns nothing.


<h3><a name="setsessiondir"></a><code>cgilua.session.setsessiondir (path)</code></h3>
Changes the session temporary directory.
Argument <code>path</code> is a string with the new directory.<br>
Returns nothing. 

<hr/>
<h2><a name="stable"></a>Stable (state table)</h2>

<h3><a name="get"></a><code>stable.get (key)</code></h3>
Retrieves the value of a given key.<br>
Returns any value.


<h3><a name="set"></a><code>stable.set (key, value)</code></h3>
Stores a value associated to a key.<br>
Returns nothing.

</div> <!-- id="content" -->

</div> <!-- id="main" -->

<div id="about">
	<p><a href="http://validator.w3.org/check?uri=referer"><img src="http://www.w3.org/Icons/valid-xhtml10" alt="Valid XHTML 1.0!" height="31" width="88" /></a></p>
	<p><small>
	$Id: libraries.html,v 1.16 2005/07/14 15:50:37 carregal Exp $
	</small></p>
</div> <!-- id="about" -->

</div> <!-- id="container" -->

</body>
</html> 
