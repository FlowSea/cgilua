<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
    <title>CGILua - Building web scripts with Lua</title>
    <link rel="stylesheet" href="http://www.keplerproject.org/doc.css" type="text/css"/>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
</head>
<body>

<div id="container">
	
<div id="product">
	<div id="product_logo"><a href="http://www.keplerproject.org">
		<img alt="CGILua logo" src="cgi-128.gif"/>
	</a></div>
	<div id="product_name"><big><b>CGILua</b></big></div>
	<div id="product_description">Building web scripts with Lua</div>
</div> <!-- id="product" -->

<div id="main">
	
<div id="navigation">
<h1>CGILua</h1>
	<ul>
		<li><a href="index.html">Home</a>
			<ul>
				<li><a href="index.html#overview">Overview</a></li>
				<li><a href="index.html#status">Status</a></li>
				<li><a href="index.html#download">Download</a></li>
				<li><a href="index.html#history">History</a></li>
				<li><a href="#incompatibility">Incompatibilities</a></li>
				<li><a href="index.html#credits">Credits</a></li>
				<li><a href="index.html#contact">Contact us</a></li>
			</ul>
		</li>
		<li><a href="config.html">Installation and configuration</a>
			<ul>
				<li><a href="config.html#installation">Installation</a></li>
				<li><a href="config.html#config">Configuration</a></li>
			</ul>
		</li>
		<li><a href="scripts.html">CGILua scripts</a>
			<ul>
				<li><a href="scripts.html#scripts">Lua Scripts</a></li>
				<li><a href="scripts.html#templates">Lua Pages</a></li>
				<li><a href="scripts.html#parameters">Receiving parameters</a></li>
			</ul>
		</li>
		<li><a href="reference.html">CGILua reference</a>
			<ul>
				<li><a href="reference.html#headers">Headers</a></li>
				<li><a href="reference.html#contents">Content generation</a></li>
				<li><a href="reference.html#prep">Pre-processing templates</a></li>
				<li><a href="reference.html#variables">CGILua's variables</a></li>
				<li><a href="reference.html#error_handling">Error Handling</a></li>
				<li><a href="reference.html#behavior">CGILua behavior</a></li>
				<li><a href="reference.html#auxiliar">Auxiliary functions</a></li>
				<li><a href="reference.html#urlcode">URL encoding functions</a></li>
				<li><a href="reference.html#index">Alphabetic index</a></li>
			</ul>
		</li>
		<li><a href="libraries.html">Distributed libraries</a>
			<ul>
				<li><a href="libraries.html#cookies">Cookies</a></li>
				<li><a href="libraries.html#serialize">Serialize</a></li>
				<li><a href="libraries.html#session">Session</a></li>
				<li><a href="libraries.html#stable">Stable</a></li>
			</ul>
		</li>
		<li><strong>Server API</strong></li>
		<li><a href="examples.html">Examples</a></li>
		<li><a href="license.html">License</a></li>
	</ul>
</div> <!-- id="navigation" -->

<div id="content">

<h2>Server API</h2>

<p>The Server API is a set of functions that encapsulate the web server and the
used launcher. The functions are grouped into two groups:
SAPI.Request and SAPI.Response.</p>

<p>The Server API allows the abstraction of a series of details and makes CGILua
a lot more portable, since porting it means writing a SAPI Launcher for the
target platform.</p>

<p>CGILua currently supports Apache, Microsoft IIS, Tomcat and Xavante as web
servers, and CGI, FastCGI, mod_lua, ISAPI and Servlets as Launchers.</p>

<p>Here is the list of SAPI functions:</p>

<ul>
<li><b><code>SAPI.Response.contenttype (string)</code></b> Sends
the <code>Content-type</code> header to the client. The given
string is of the form "type/subtype". This function must be called
before any output is generated.</li>

<li><b><code>SAPI.Response.redirect (string)</code></b> Sends the
<code>Location</code> header to the client. The given string should
be a URL.</li>

<li><b><code>SAPI.Response.header (header, value)</code></b> Sends
a generic header to the client. The first argument must be the
header name, such as "Set-Cookie". The second argument should be
its value. This function should not be used to replace the
<code>contenttype</code> nor the <code>redirect</code>
functions.</li>

<li><b><code>SAPI.Response.write (string)</code></b> Generates
output.</li>

<li><b><code>SAPI.Response.errorlog (string)</code></b> Generates
error output.</li>
</ul>

<ul>
<li><b><code>SAPI.Request.getpostdata ([n])</code></b> Gets a block
of "POST data". The optional parameter is the number of bytes to
read (a default block size is used instead). This function returns
the block as a Lua string.</li>

<li><b><code>SAPI.Request.servervariable (string)</code></b> Gets
the value of an environment variable (<code>CONTENT_LENGTH</code>,
<code>QUERY_STRING</code>, <code>REMOTE_ADDR</code> etc.). The
argument must be a CGI variable.</li>
</ul>

</div> <!-- id="content" -->

</div> <!-- id="main" -->

<div id="about">
	<p><a href="http://validator.w3.org/check?uri=referer"><img src="http://www.w3.org/Icons/valid-xhtml10" alt="Valid XHTML 1.0!" height="31" width="88" /></a></p>
	<p><small>
	$Id: sapi.html,v 1.14 2005/05/18 21:16:12 uid20006 Exp $
	</small></p>
</div> <!-- id="about" -->

</div> <!-- id="container" -->

</body>
</html> 
