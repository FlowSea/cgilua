
<h2>Compilation</h2>

<p>Pre-requisites:
<ul>
<li><a href="http://www.keplerproject.org/luajava">LuaJava 1.0 Beta 4</a>: download the <code>jar</code> and put in <code>"WEB-INF/lib"</code></li>
<li><a href="http://logging.apache.org/log4j/docs/">Log4J</a>: download the <code>jar</code> and put in <code>"WEB-INF/lib"</code></li>
<li>Any servlet container. Tomcat will be used in the 
<a href="#installation">installation</a> and 
<a href="#configuration">configuration</a> sections as an example. TODO: instrucoes de onde configurar o jar do servlet-api</li>
</ul>
</p>

<p>
You have two options to compile cgilua servlet launcher, use the provided 
<a href="http://ant.apache.org/">Ant</a> build file or use the provided Makefile.
</p>

<h3>Ant</h3>

<p>
If you don't know how to use Ant you should read the manual at 
<a href="http://ant.apache.org/manual/index.html">http://ant.apache.org/manual/index.html</a>.<br>

Edit the <code>build.xml</code> to modify the properties <code>cgilua.dir</code> and <code>libext</code>.<br>
</p>

<p>
The <code>cgilua.dir</code> property must define the installation directory for cgilua.
This directory is used as the base for lua modules loading.
</p>

<p>
The <code>libext</code> property must contain the shared library extension 
used by your OS. Example:
<ul>
<li>Windows: ".dll"</li>
<li>MacOS: ".dylib"</li>
<li>Unix: ".so"</li>
</ul>
</p>

<p>
After editing the <code>build.xml</code> file, run the default target.
</p>

<h3>Makefile</h3>

<h2>Installation and Configuration</h2>

<p>
Whatever compilation method you choose, Ant or Makefile, four files are generated:
<ul>
<li><code>cgilua-5.0a4.jar</code>: Java side of CGILua servlet launcher</li>
<li><code>WEB-INF/web.xml</code>: application descriptor</li>
<li><code>servlet.conf</code>: </li>
<li><code>servlet.lua</code>: CGILua sapi implementation</li>
</ul>
</p>

<p>
Any servlet container can be used to run cgilua applications through the
servlet launcher.<br>
Tomcat will be used in this configuration manual.
</p>

<p>
The application descriptor, <code>WEB-INF/web.xml</code>, defines a servlet called <code>CGILuaLauncherServlet</code>.
This configuration is listed below.<br>

<pre>
<xmp>
  <servlet>
    <servlet-name>CGILuaLauncherServlet</servlet-name>
    <servlet-class>org.keplerproject.cgilua.launcher.CGILuaLauncherServlet</servlet-class>
    <init-param>
      <param-name>propertyFile</param-name>
      <param-value>C:/Program Files/CGILua/servlet.conf</param-value>
    </init-param>
  </servlet>
</xmp>
</pre>
</p>

<p>
The parameter <code>propertyFile</code> points to the location of the 
<code>servlet.conf</code> file. This configuration file, listed below, 
defines 4 variables:
</p>

<pre>
launcher=C:/Program Files/CGILua/servlet.lua
root.dir=C:/Program Files/CGILua
cgi.path=WEB-INF/cgilua
active.max=30
</pre>

<ul>
<li><code>launcher</code>: the full path of the servlet launcher script;</li>
<li><code>root.dir</code>: the path to CGILua installation;</li>
<li><code>cgi.path</code>: path, relative to the application, that contains lua pages;</li>
<li><code>active.max</code>: maximum number of LuaState's created by the LuaStatePool</li>
</ul>
</p>

<p>
</p>

<p>
</p>

